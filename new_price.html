<!DOCTYPE html>
<html>
  <head>
    <title>Список товаров с выбором количества</title>
  </head>
  
  <style>
  
  .body {
    user-select: none;
    background-color: rgb(255, 255, 255);
    text-align: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  .homepage_button {
      font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;
      font-size: 8px;
      color: #ffffff;
      text-transform: uppercase;
      text-align: center;
      padding: 3px 15px;
      background-color: #4d4d4d;
      border-radius: 5px;
      border: none;
  }
  
  .text {
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    font-size: 22px;
  }

  .quantity {
    font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    font-size: 17px;
    color: #4212b1;
    text-align: center;
    width: 30px;
    border: 0px;
    background: none;
    white-space: nowrap;
  }
  
  .arrows {
    font-family: Arial, Helvetica, sans-serif, Times, serif;
    font-size: 20px;
    font-weight: bolder;
    color: #ffffff;
    background-color: #4d4d4d;
    padding: 3px 20px;
    border-radius: 3px;
    white-space: nowrap;
  }

  button[name="+ and -"] {
    background: none;
    border: 0px;
    white-space: nowrap;
  }

  #sum {
    font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    font-size: 18px;
    color: #4212b1;
    padding: 0px 0px 0px 20px;
  }

  .total-button {
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    font-size: 15px;
    text-align: center;
    color: #ffffff;
    background-color: #4d4d4d;
    padding: 5px 10px;
    border-radius: 3px;
    white-space: nowrap;
  }

  .total {
    font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
    font-size: 15px;
    color: #4212b1;
  }

  .reset-button {
    font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
    font-size: 15px;
    text-align: center;
    color: #ffffff;
    background-color: #4d4d4d;
    padding: 5px 10px;
    border-radius: 3px;
    white-space: nowrap;
  }
  
  ul {
    list-style-type: none;
  }
  
  /* Добавим стили для плейсхолдера (текста, отображаемого в пустом поле ввода) */
  input[type="number"]::placeholder {
    text-align: center;
  }

   /* Скрытие стрелок в поле ввода типа "number" */
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none; /* Для WebKit (Chrome, Safari, Opera) */
    margin: 0; /* Убираем отступы */
  }

   /*
  input[type="number"] {
    -moz-appearance: textfield; /* Для Firefox 
  } 
  
  */
  input[type="number"]::-moz-inner-spin-button,
  input[type="number"]::-moz-outer-spin-button {
    -moz-appearance: none;
    margin: 0;
  }

</style>
  
<body class="body">

  <button class="homepage_button" onclick="window.location.href='index.html'">главная</button>

  <ul id="productList">

    <li>
      <span><p class="text">Сборка и установка кухонного каркаса - 650р</p></span>
      <span>
        <button name="+ and -" class="decrement" data-price="650"><span class="arrows">-</span></button>
        <input class="quantity" type="number" disabled id="noNumbersInput" min="0" value="0" data-price="650"> 
        <button name="+ and -" class="increment" data-price="650"><span class="arrows">+</span></button>
        <span id="sum" class="item-total">Сумма: 0</span>
      </span>
    </li>
  <br>
    <li>
      <span><p class="text">Сборка и установка колонны - 1000р</p></span>
      <span>
        <button name="+ and -" class="decrement" data-price="1000"><span class="arrows">-</span></button>
        <input class="quantity" type="number" disabled id="noNumbersInput" min="0" value="0" data-price="1000">
        <button name="+ and -" class="increment" data-price="1000"><span class="arrows">+</span></button>
        <span id="sum" class="item-total">Сумма: 0</span>
      </span>
    </li>
  <br>
    <li>
      <span><p class="text">Уменьшение глубины / высоты / ширины шкафа - 800р</p></span>
      <span>
        <button name="+ and -" class="decrement" data-price="800"><span class="arrows">-</span></button>
        <input class="quantity" type="number" disabled id="noNumbersInput" min="0" value="0" data-price="800"> 
        <button name="+ and -" class="increment" data-price="800"><span class="arrows">+</span></button>
        <span id="sum"class="item-total">Сумма: 0</span>
      </span>
    </li>
  </ul>
  <!--<h2>Выбранные товары:</h2>-->
  <div style="display: none;" class="cart"><ul id="cart"></ul></div>
  
  <div><button class="total-button" id="viewCartButton">Перейти к выбранным товарам</button></div>
  
  <p class="total" id="total">ИТОГ: 0</p>
  
  <div><button class="reset-button" id="resetButton">Сбросить все</button></div>

  <script>

    // Функция для обновления общей суммы и списка выбранных товаров
    function updateCart() {
      const cart = document.getElementById("cart");
      const cartItems = cart.getElementsByTagName("li");
      let total = 0;

      while (cartItems.length > 0) {
        cartItems[0].remove();
      }

      const productList = document.getElementById("productList");
      const productItems = productList.getElementsByTagName("li");

      for (let i = 0; i < productItems.length; i++) {
        const quantity = parseInt(productItems[i].querySelector("input").value);
        if (quantity > 0) {
          const productName = productItems[i].querySelector("span").textContent;
          const productPrice = parseInt(productItems[i].querySelector("input").getAttribute("data-price"));
          const itemTotal = quantity * productPrice;
          total += itemTotal;

          productItems[i].querySelector(".item-total").textContent = `Сумма: ${itemTotal}`;

          const cartItem = document.createElement("li");
          cartItem.textContent = `${productName} Количество: ${quantity} Сумма: ${itemTotal}`;
          cart.appendChild(cartItem);
        } else {
          productItems[i].querySelector(".item-total").textContent = `Сумма: 0`;
        }
      }

      const totalElement = document.getElementById("total");
      totalElement.textContent = `ИТОГ: ${total}`;
    }

    // Обновляем список выбранных товаров при изменении количества товаров
    const quantityInputs = document.querySelectorAll("input");
    quantityInputs.forEach(input => {
      input.addEventListener("change", updateCart);
    });

    // Добавляем функциональность для кнопок "+" и "-"
    const incrementButtons = document.querySelectorAll(".increment");
    const decrementButtons = document.querySelectorAll(".decrement");

    incrementButtons.forEach(button => {
      button.addEventListener("click", () => {
        const input = button.parentElement.querySelector("input");
        input.stepUp();
        updateCart();
      });
    });

    decrementButtons.forEach(button => {
      button.addEventListener("click", () => {
        const input = button.parentElement.querySelector("input");
        input.stepDown();
        updateCart();
      });
    });
    
    
    // Добавляем обработчик для кнопки "Перейти к выбранным товарам"
    const viewCartButton = document.getElementById("viewCartButton");
    viewCartButton.addEventListener("click", () => {
      // Сохраняем выбранные товары в localStorage
      const cartItems = document.querySelectorAll("#cart li");
      const cartData = [];
      cartItems.forEach(item => {
        cartData.push(item.textContent);
      });
      localStorage.setItem("cartData", JSON.stringify(cartData));
      // Перенаправляем пользователя на новую страницу
      window.location.href = "new_price_1.html";
    });
    
    // Обработчик события для кнопки "Сбросить все"
    const resetButton = document.getElementById("resetButton");
    resetButton.addEventListener("click", () => {
      // Обнуляем значения всех полей ввода
      const quantityInputs = document.querySelectorAll("input.quantity");
      quantityInputs.forEach(input => {
        input.value = 0;
      });
      // Обновляем корзину и общую сумму
      updateCart();
    
    });

    const noNumbersInput = document.getElementById('noNumbersInput');
    noNumbersInput.addEventListener('keydown', function(event) {
      if (event.key >= '0' && event.key <= '9') {
        event.preventDefault(); // Предотвращаем ввод цифр
      }
    });

    
  </script>
</body>
</html>
