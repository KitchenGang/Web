<!DOCTYPE html>
<html>
<head>
  <title>Список товаров с выбором количества</title>
  
<style>

  .body {
    text-align: center;
  }
  .text {
    font-size: 40px;
  }
  .total{
    font-size: 30px;
  }
  .cart{
    font-size: 20px;
  }
  .price {
    font-size: 40px;
    margin-left: auto;
    margin-right: auto;
    width: 6em
  }
  .highlighted-text {
    /*margin-left: auto;
    margin-right: auto;*/
    position: relative;
    display: inline-block;
    /*padding: 0px 0px; /* Регулируйте вертикальное расстояние */  
  }

  .highlighted-text::before,
  .highlighted-text::after {
    content: "";
    position: absolute;
    left: 0;
    right: 0;
    height: 2px; /* Высота полос сверху и снизу */
    background-color: #d3d3d3; /* Светло-серый цвет */
  }

  .highlighted-text::before {
    top: 0px; /* Расстояние сверху */
  }

  .highlighted-text::after {
    bottom: 0px; /* Расстояние снизу */
  }

  
  .quantity {
    font-size: 50px;
    text-align: center;
    border: 0px;
    width: 100px;
  }

  .arrows {
    font-size: 25px;
    text-align: center;
    padding: 0px 20px;

  }

  #size {
    font-size: 25px;
    padding: 0px 0px 0px 80px;
  }

  ul {
    list-style-type: none;
  } 

  /* Добавим стили для плейсхолдера (текста, отображаемого в пустом поле ввода) */
  input[type="number"]::placeholder {
    text-align: center;
  }

   /* Скрытие стрелок в поле ввода типа "number" */
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button {
    -webkit-appearance: none; /* Для WebKit (Chrome, Safari, Opera) */
    margin: 0; /* Убираем отступы */
  }

   /*
  input[type="number"] {
    -moz-appearance: textfield; /* Для Firefox 
  } 
  
  */
  input[type="number"]::-moz-inner-spin-button,
  input[type="number"]::-moz-outer-spin-button {
    -moz-appearance: none;
    margin: 0;
  }










  
</style>
  
</head>

<body class="body">

  <span><h1 class="price">ПРАЙС</h1></span>

  <p><button onclick="window.location.href='index.html'" class="homepage_button">главная</button></p>

  <ul id="productList">

    <li>
      <span class="highlighted-text"><p class="text">Сборка и установка кухонного каркаса - 650р</p></span>
      <br>
      <br>
      <span>
        <button class="decrement" data-price="650"><span class="arrows">-</span></button>
        <input class="quantity" type="number" min="0" value="0" data-price="650"> 
        <button class="increment" data-price="650"><span class="arrows">+</span></button>
        <span id="size" class="item-total">Сумма: 0</span>
      </span>
    </li>
    <br>
    <br>
    <li>
      <span class="highlighted-text"><p class="text">Сборка и установка колонны - 1000р</p></span>
      <br>
      <br>
      <span>
        <button class="decrement" data-price="1000"><span class="arrows">-</span></button>
        <input class="quantity" type="number" min="0" value="0" data-price="1000">
        <button class="increment" data-price="1000"><span class="arrows">+</span></button>
        <span id="size" class="item-total">Сумма: 0</span>
      </span>
    </li>
    <br>
    <br>
    <li>
      <span class="highlighted-text"><p class="text">Уменьшение глубины / высоты / ширины шкафа - 800р</p></span>
      <br>
      <br>
      <span>
        <button class="decrement" data-price="800"><span class="arrows">-</span></button>
        <input class="quantity" type="number" min="0" value="0" data-price="800"> 
        <button class="increment" data-price="800"><span class="arrows">+</span></button>
        <span id="size"class="item-total">Сумма: 0</span>
      </span>
    </li>
    <br>
    <br>
  </ul>

  <!--<h2>Выбранные товары:</h2>-->
  <button id="resetButton">Сбросить все</button>

  <div style="display: none;" class="cart"><ul id="cart"></ul></div>

  <p class="total" id="total">ИТОГ 0</p>
  
  <button class="button_total" id="viewCartButton">Перейти к выбранным товарам</button>







  <script>
    // Функция для обновления общей суммы и списка выбранных товаров
    function updateCart() {
      const cart = document.getElementById("cart");
      const cartItems = cart.getElementsByTagName("li");
      let total = 0;

      while (cartItems.length > 0) {
        cartItems[0].remove();
      }

      const productList = document.getElementById("productList");
      const productItems = productList.getElementsByTagName("li");

      for (let i = 0; i < productItems.length; i++) {
        const quantity = parseInt(productItems[i].querySelector("input").value);
        if (quantity > 0) {
          const productName = productItems[i].querySelector("span").textContent;
          const productPrice = parseInt(productItems[i].querySelector("input").getAttribute("data-price"));
          const itemTotal = quantity * productPrice;
          total += itemTotal;

          productItems[i].querySelector(".item-total").textContent = `Сумма: ${itemTotal}`;

          const cartItem = document.createElement("li");
          cartItem.textContent = `${productName} Количество: ${quantity} Сумма: ${itemTotal}`;
          cart.appendChild(cartItem);
        } else {
          productItems[i].querySelector(".item-total").textContent = `Сумма: 0`;
        }
      }

      const totalElement = document.getElementById("total");
      totalElement.textContent = `Общая сумма: ${total}`;
    }

    // Обновляем список выбранных товаров при изменении количества товаров
    const quantityInputs = document.querySelectorAll("input");
    quantityInputs.forEach(input => {
      input.addEventListener("change", updateCart);
    });

    // Добавляем функциональность для кнопок "+" и "-"
    const incrementButtons = document.querySelectorAll(".increment");
    const decrementButtons = document.querySelectorAll(".decrement");

    incrementButtons.forEach(button => {
      button.addEventListener("click", () => {
        const input = button.parentElement.querySelector("input");
        input.stepUp();
        updateCart();
      });
    });

    decrementButtons.forEach(button => {
      button.addEventListener("click", () => {
        const input = button.parentElement.querySelector("input");
        input.stepDown();
        updateCart();
      });
    });
    
    
    // Добавляем обработчик для кнопки "Перейти к выбранным товарам"
    const viewCartButton = document.getElementById("viewCartButton");
    viewCartButton.addEventListener("click", () => {
      // Сохраняем выбранные товары в localStorage
      const cartItems = document.querySelectorAll("#cart li");
      const cartData = [];
      cartItems.forEach(item => {
        cartData.push(item.textContent);
      });
      localStorage.setItem("cartData", JSON.stringify(cartData));
      // Перенаправляем пользователя на новую страницу
      window.location.href = "new_price_1.html";
    });
    
    // Обработчик события для кнопки "Сбросить все"
    const resetButton = document.getElementById("resetButton");
    resetButton.addEventListener("click", () => {
      // Обнуляем значения всех полей ввода
      const quantityInputs = document.querySelectorAll("input.quantity");
      quantityInputs.forEach(input => {
        input.value = 0;
      });
      // Обновляем корзину и общую сумму
      updateCart();







      viewCartButton.addEventListener("click", () => {
  const cartItems = document.querySelectorAll("#cart li");
  const cartData = [];
  cartItems.forEach(item => {
    cartData.push(item.textContent);
  });
  const totalValue = document.getElementById("total").textContent;

  // Сохраняем данные в куки
  document.cookie = `cartData=${JSON.stringify(cartData)}`;
  document.cookie = `totalValue=${totalValue}`;

  // Переходим на новую страницу
  window.location.href = "new_price_1.html";
});







    });
    
  </script>
</body>
</html>
